<!DOCTYPE html>
<html>
    <head>
        <title>
            Admin Panel
        </title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/png" href="/res/icon.png">
        <link rel="stylesheet" href="globalchat.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            * {
                scrollbar-width: thin;
                scrollbar-color: #555 transparent;
            }
            ::-webkit-scrollbar {
                width: 8px;
            }
            ::-webkit-scrollbar-track {
                background: transparent !important;
            }
            ::-webkit-scrollbar-thumb {
                background: #555 !important;
                border-radius: 10px;
            }
            body {
                padding-right: 350px;
                margin: 0;
                background: #121212;
                color: #fff;
                height: 100vh;
                overflow: hidden;
                display: flex;
            }
            #typingContainer {
                min-width:500px !important;
            }
            #left {
                flex: 2;
                background: #1a1a1a;
                height: 100vh;
                overflow-y: auto;
                border-right: 1px solid #2a2a2a;
                padding: 20px;
            }
            #right {
                width: 350px;
                background: #1f1f1f;
                height: 100vh;
                position: fixed;
                right: 0;
                top: 0;
                padding: 20px;
                overflow-y: auto;
                border-left: 1px solid #2a2a2a;
                z-index: 900;
                transition: none;
            }
            #right.open {
                right: 0;
            }
            #rightToggleBtn {
                display: none;
            }
            #rightToggleBtn:hover {
                background: #3a3a3a;
            }
            .message {
                display: flex;
                gap: 10px;
                background: #1f1f1f;
                border-radius: 8px;
                padding: 12px;
                margin-bottom: 12px;
            }

            .message img {
                width: 42px;
                height: 42px;
                border-radius: 50%;
                object-fit: cover;
            }
            .msg-header {
                color: #aaa;
                font-size: 0.85em;
            }
            textarea, select {
                background: #1b1b1b !important;
                border: 1px solid #444 !important;
                color: #fff !important;
                border-radius: 6px !important;
            }
            ::placeholder {
                color:grey !important;
            }
            .user-item {
                background: #222;
                padding: 12px;
                border-radius: 6px;
                cursor: pointer;
                margin-bottom: 12px;
            }
            .user-item:hover {
                background: #333;
            }
            .deleteBtn {
                color:white;
                background: #333;
                border:1px solid #444;
                border-radius: 5px;
                padding:3px;
                font-size:0.7em;
                transition:0.3s all;
                margin-left:50px;
            }
            .deleteBtn:hover {
                background: #222;
                border-color: #333;
                color:grey;
            }
            #deleteTypingBtn {
                background: #7a1f1f;
            }
            @media (max-width: 900px) {
                body {
                    padding-right: 0;
                }
                #right {
                    width: 100%;
                    right: -100%;
                    transition: right 0.35s ease;
                }
                #right.open {
                    right: 0;
                }
                #rightToggleBtn {
                    display: block;
                    position: fixed;
                    right: 0;
                    top: 50%;
                    transform: translateY(-50%);
                    background: #2a2a2a;
                    border: none;
                    border-radius: 6px 0 0 6px;
                    padding: 10px 14px;
                    color: #fff;
                    cursor: pointer;
                    z-index: 1000;
                    transition: background 0.2s;
                }
                #rightToggleBtn:hover {
                    background: #3a3a3a;
                }
            }
        </style>
    </head>
    <body>
        <button id="rightToggleBtn">
            &#x276E;
        </button>
        <div id="left">
            <h2 class="mb-3">
                Messages Mod View
            </h2>
            <div id="typingSection" class="mb-3">
                <button id="deleteTypingBtn" class="btn btn-danger btn-sm">
                    Delete Typing Data
                </button>
            </div>
            <div id="mutedUsers">
                Muted Users
            </div>
            <div id="privateChats">
            </div>
            <div id="chatView" class="mt-3" style="display:none;">
                <button id="backButton" class="btn btn-secondary mt-3">
                    Back
                </button>
                <h3 id="chatTitle" class="mb-3">
                </h3>
                <div id="chatMessages">
                </div>
                <div id="adminControls" class="mt-3">
                    <label class="form-label text-secondary">
                        Send As:
                    </label>
                    <select id="sendAsSelect" class="form-select mb-2">
                    </select>
                    <textarea id="adminMessageInput" class="form-control mb-2" placeholder="Type A Message"></textarea>
                    <div class="d-flex gap-2">
                        <button id="sendAdminMessage" class="btn btn-secondary">
                            Send
                        </button>
                        <button id="deleteChat">
                            Delete Chat
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div id="right">
            <h2 class="mb-3">
                Users
            </h2>
            <div id="userList">
            </div>
            <div id="userEdit" class="mt-3" style="display:none;">
                <h3 id="editTitle" class="mb-2">
                </h3>
                <textarea id="userData" class="form-control" style="height:300px;"></textarea>
                <div class="d-flex gap-2 mt-3 flex-wrap">
                    <button id="saveUser" class="btn btn-secondary">
                        Save Changes
                    </button>
                    <button id="backToList" class="btn btn-secondary">
                        Back
                    </button>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
        </script>
        <script type="module" src="admin.js">
        </script>
        <script>
            const toggleBtn = document.getElementById("rightToggleBtn");
            const rightPanel = document.getElementById("right");
            toggleBtn.onclick = () => {
                if (window.innerWidth <= 900) {
                    rightPanel.classList.toggle("open");
                    toggleBtn.textContent = rightPanel.classList.contains("open") ? "&#x276F;" : "&#x276E;;";
                }
            };
        </script>
    </body>
</html>