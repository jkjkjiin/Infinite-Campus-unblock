<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>
            Settings
        </title>
        <link rel="icon" type="image/png" href="res/icon.png">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        <style>
            body {
                background-color: #0f0f0f;
            }
            body::-webkit-scrollbar {
                display: none;
            }
            textarea {
                resize: none;
            }
            .card {
                background-color: #111 !important;
                border-color: #222;
            }
            .form-control, .form-control-color {
                background-color: #000;
                color: #fff;
                border: 1px solid #333;
            }
            #profileContainer {
                justify-content:center;
            }
            .form-control:disabled {
                background:#444;
            }
            .form-control:focus {
                background-color: #000;
                color: #fff;
                border-color: #0d6efd;
                box-shadow: none;
            }
            .list-group-item {
                background: rgba(255, 255, 255, 0.05);
                color: white;
                border: none;
            }
            .icon-btn {
                width: 36px;
                height: 36px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            #settingsPanel {
                display: none;
            }
            #localStorageList {
                color:grey;
            }
            .text-center, label {
                color:#777;
                text-align:center;
            }
        </style>
    </head>
    <body class="text-light">
        <div class="container py-5" style="max-width: 640px;">
            <div class="text-center mb-4">
                <h2 class="fw-bold">
                    Settings
                </h2>
                <p id="status" class="text-secondary">
                    Checking login status
                </p>
                <a href="chat.html" class="btn btn-outline-primary w-25 mt-2">
                    Go To Chat
                </a>
            </div>
            <div id="settingsPanel" class="card p-4 rounded-4 shadow-lg">
                <h3 class="text-center mb-4">
                    Profile
                </h3>
                <div class="mb-3">
                    <label class="form-label fw-semibold">
                        Name
                    </label>
                    <div class="d-flex align-items-center gap-2">
                        <textarea id="displayNameInput" class="form-control flex-grow-1" placeholder="Enter Name Here" disabled maxlength="20" rows="1"></textarea>
                        <button id="editDisplayBtn" class="btn btn-outline-light icon-btn" title="Edit">
                            ✎
                        </button>
                        <button id="saveDisplayBtn" class="btn btn-success icon-btn" style="display:none;" title="Save">
                            ✓
                        </button>
                        <button id="cancelDisplayBtn" class="btn btn-danger icon-btn" style="display:none" title="Cancel">
                            ✕
                        </button>
                    </div>
                    <small id="displayCharCount" class="text-secondary d-block text-end mt-1">
                        0 / 20
                    </small>
                </div>
                <div class="mb-4" style="text-align:center">
                    <label class="form-label fw-semibold">
                        Display Name Color
                    </label>
                    <div class="d-flex gap-2 align-items-center" style="justify-content:center">
                        <input type="color" id="nameColorInput" class="form-control form-control-color">
                        <button id="saveNameColorBtn" class="btn btn-primary">
                            Save Name Color
                        </button>
                    </div>
                </div>
                <div class="mb-4" style="text-align:center">
                    <label class="form-label fw-semibold">
                        Bio
                    </label>
                    <div class="d-flex align-items-center gap-2">
                        <textarea id="bioInput" class="form-control flex-grow-1" placeholder="Enter Bio Here" disabled maxlength="50" rows="1"></textarea>
                        <button id="editBioBtn" class="btn btn-outline-light icon-btn" title="Edit">
                            ✎
                        </button>
                        <button id="saveBioBtn" class="btn btn-success icon-btn" style="display:none;" title="Save">
                            ✓
                        </button>
                        <button id="cancelBioBtn" class="btn btn-danger icon-btn" style="display:none;" title="Cancel">
                            ✕
                        </button>
                    </div>
                    <small id="bioCharCount" class="text-secondary d-block text-end mt-1">
                        0 / 50
                    </small>
                </div>
                <div id="profileContainer" style="display:flex;" class="mb-3">
                </div>
                <hr>
                <h4 class="text-center mt-3">
                    Account Info
                </h4>
                <hr class="mx-auto" style="max-width:100px;">
                <div style="display:grid; justify-content:center;">
                    <p class="mb-2" style="text-align:center;color:#777;">
                        <strong>
                            User ID:
                        </strong>
                        <span id="userIdDisplay" class="text-info">
                        </span>
                    </p>
                    <hr>
                    <p class="mb-2" style="text-align:center;color:#777">
                        <strong>
                            Email:
                        </strong>
                        <span id="userEmailDisplay" class="text-info">
                        </span>
                        <br>
                        <span id="adminBadge" class="ms-2 badge bg-warning text-dark">
                        </span>
                    </p>
                    <button id="verifyEmailBtn" class="btn btn-warning w-100 mb-3 d-none">
                        Verify Email
                    </button>
                    <hr>
                </div>
                <button id="logoutBtn" class="btn btn-outline-danger w-100 mb-4">
                    Log Out
                </button>
                <h4 class="text-center">
                    Other Settings
                </h4>
                <hr>
                <button id="resetPasswordBtn" class="btn btn-outline-secondary w-100 mb-3">
                    Reset Password
                </button>
                <ul id="localStorageList" class="list-group small" style="pointer-events:none;">
                </ul>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
        </script>
        <script type="module" src="chatsettings.js">
        </script>
    </body>
</html>